<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">
    Arduino Mega 2560 Rev3 - Wiring Diagram
  </text>
  <text x="600" y="50" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#666">
    INA219 + MCP2515 CAN + MCP4725 DAC Modules
  </text>
  
  <!-- Arduino Mega 2560 -->
  <g id="arduino_mega">
    <rect x="400" y="300" width="200" height="350" fill="#006699" stroke="#004466" stroke-width="2" rx="5"/>
    <text x="500" y="290" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Arduino Mega 2560 Rev3</text>
    
    <!-- Power pins -->
    <rect x="410" y="310" width="8" height="8" fill="#ffcc00"/>
    <text x="425" y="318" font-family="Arial, sans-serif" font-size="10" fill="white">5V</text>
    
    <rect x="410" y="325" width="8" height="8" fill="#ffcc00"/>
    <text x="425" y="333" font-family="Arial, sans-serif" font-size="10" fill="white">3.3V</text>
    
    <rect x="410" y="340" width="8" height="8" fill="#333"/>
    <text x="425" y="348" font-family="Arial, sans-serif" font-size="10" fill="white">GND</text>
    
    <rect x="410" y="355" width="8" height="8" fill="#333"/>
    <text x="425" y="363" font-family="Arial, sans-serif" font-size="10" fill="white">GND</text>
    
    <!-- I2C pins -->
    <rect x="570" y="310" width="8" height="8" fill="#00cc66"/>
    <text x="560" y="318" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="end">SDA 20</text>
    
    <rect x="570" y="325" width="8" height="8" fill="#00cc66"/>
    <text x="560" y="333" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="end">SCL 21</text>
    
    <!-- SPI pins -->
    <rect x="570" y="370" width="8" height="8" fill="#ff6600"/>
    <text x="560" y="378" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="end">MISO 50</text>
    
    <rect x="570" y="385" width="8" height="8" fill="#ff6600"/>
    <text x="560" y="393" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="end">MOSI 51</text>
    
    <rect x="570" y="400" width="8" height="8" fill="#ff6600"/>
    <text x="560" y="408" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="end">SCK 52</text>
    
    <rect x="570" y="415" width="8" height="8" fill="#ff6600"/>
    <text x="560" y="423" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="end">CS 53</text>
    
    <!-- Digital pins -->
    <rect x="570" y="450" width="8" height="8" fill="#cc00cc"/>
    <text x="560" y="458" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="end">D2 (INT)</text>
  </g>
  
  <!-- INA219 Current Sensor -->
  <g id="ina219">
    <rect x="100" y="100" width="120" height="80" fill="#8B4513" stroke="#654321" stroke-width="2" rx="3"/>
    <text x="160" y="90" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">INA219</text>
    <text x="160" y="85" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Current Sensor</text>
    
    <!-- Pins -->
    <rect x="110" y="110" width="6" height="6" fill="#ffcc00"/>
    <text x="95" y="116" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">VCC</text>
    
    <rect x="110" y="125" width="6" height="6" fill="#333"/>
    <text x="95" y="131" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">GND</text>
    
    <rect x="110" y="140" width="6" height="6" fill="#00cc66"/>
    <text x="95" y="146" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">SCL</text>
    
    <rect x="110" y="155" width="6" height="6" fill="#00cc66"/>
    <text x="95" y="161" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">SDA</text>
    
    <!-- Terminal blocks for current measurement -->
    <rect x="190" y="125" width="15" height="10" fill="#666"/>
    <text x="225" y="132" font-family="Arial, sans-serif" font-size="9" fill="#333">VIN+</text>
    
    <rect x="190" y="140" width="15" height="10" fill="#666"/>
    <text x="225" y="147" font-family="Arial, sans-serif" font-size="9" fill="#333">VIN-</text>
  </g>
  
  <!-- MCP2515 CAN Module -->
  <g id="mcp2515">
    <rect x="700" y="100" width="140" height="100" fill="#2E8B57" stroke="#1F5F3F" stroke-width="2" rx="3"/>
    <text x="770" y="90" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">MCP2515</text>
    <text x="770" y="85" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">CAN Bus Module</text>
    
    <!-- Pins -->
    <rect x="710" y="110" width="6" height="6" fill="#ffcc00"/>
    <text x="695" y="116" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">VCC</text>
    
    <rect x="710" y="125" width="6" height="6" fill="#333"/>
    <text x="695" y="131" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">GND</text>
    
    <rect x="710" y="140" width="6" height="6" fill="#ff6600"/>
    <text x="695" y="146" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">CS</text>
    
    <rect x="710" y="155" width="6" height="6" fill="#ff6600"/>
    <text x="695" y="161" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">SO</text>
    
    <rect x="710" y="170" width="6" height="6" fill="#ff6600"/>
    <text x="695" y="176" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">SI</text>
    
    <rect x="710" y="185" width="6" height="6" fill="#ff6600"/>
    <text x="695" y="191" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">SCK</text>
    
    <rect x="830" y="140" width="6" height="6" fill="#cc00cc"/>
    <text x="850" y="146" font-family="Arial, sans-serif" font-size="9" fill="#333">INT</text>
    
    <!-- CAN terminals -->
    <rect x="820" y="120" width="15" height="8" fill="#666"/>
    <text x="855" y="127" font-family="Arial, sans-serif" font-size="9" fill="#333">CAN_H</text>
    
    <rect x="820" y="160" width="15" height="8" fill="#666"/>
    <text x="855" y="167" font-family="Arial, sans-serif" font-size="9" fill="#333">CAN_L</text>
  </g>
  
  <!-- MCP4725 DAC Module -->
  <g id="mcp4725">
    <rect x="300" y="100" width="120" height="80" fill="#4B0082" stroke="#2E0054" stroke-width="2" rx="3"/>
    <text x="360" y="90" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">MCP4725</text>
    <text x="360" y="85" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">12-bit DAC</text>
    
    <!-- Pins -->
    <rect x="310" y="110" width="6" height="6" fill="#ffcc00"/>
    <text x="295" y="116" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">VCC</text>
    
    <rect x="310" y="125" width="6" height="6" fill="#333"/>
    <text x="295" y="131" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">GND</text>
    
    <rect x="310" y="140" width="6" height="6" fill="#00cc66"/>
    <text x="295" y="146" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">SCL</text>
    
    <rect x="310" y="155" width="6" height="6" fill="#00cc66"/>
    <text x="295" y="161" font-family="Arial, sans-serif" font-size="9" fill="#333" text-anchor="end">SDA</text>
    
    <!-- Output terminal -->
    <rect x="400" y="135" width="15" height="10" fill="#666"/>
    <text x="435" y="142" font-family="Arial, sans-serif" font-size="9" fill="#333">VOUT</text>
  </g>
  
  <!-- Power connections -->
  <!-- 5V connections -->
  <line x1="418" y1="314" x2="418" y2="250" stroke="#ff0000" stroke-width="2"/>
  <line x1="116" y1="113" x2="116" y2="250" stroke="#ff0000" stroke-width="2"/>
  <line x1="316" y1="113" x2="316" y2="250" stroke="#ff0000" stroke-width="2"/>
  <line x1="716" y1="113" x2="716" y2="250" stroke="#ff0000" stroke-width="2"/>
  <line x1="116" y1="250" x2="716" y2="250" stroke="#ff0000" stroke-width="2"/>
  
  <!-- GND connections -->
  <line x1="418" y1="344" x2="418" y2="270" stroke="#000000" stroke-width="2"/>
  <line x1="116" y1="128" x2="116" y2="270" stroke="#000000" stroke-width="2"/>
  <line x1="316" y1="128" x2="316" y2="270" stroke="#000000" stroke-width="2"/>
  <line x1="716" y1="128" x2="716" y2="270" stroke="#000000" stroke-width="2"/>
  <line x1="116" y1="270" x2="716" y2="270" stroke="#000000" stroke-width="2"/>
  
  <!-- I2C connections -->
  <!-- SDA connections -->
  <line x1="570" y1="314" x2="630" y2="314" stroke="#00cc66" stroke-width="2"/>
  <line x1="630" y1="314" x2="630" y2="220" stroke="#00cc66" stroke-width="2"/>
  <line x1="116" y1="158" x2="116" y2="220" stroke="#00cc66" stroke-width="2"/>
  <line x1="316" y1="158" x2="316" y2="220" stroke="#00cc66" stroke-width="2"/>
  <line x1="116" y1="220" x2="630" y2="220" stroke="#00cc66" stroke-width="2"/>
  
  <!-- SCL connections -->
  <line x1="570" y1="329" x2="650" y2="329" stroke="#00cc66" stroke-width="2"/>
  <line x1="650" y1="329" x2="650" y2="230" stroke="#00cc66" stroke-width="2"/>
  <line x1="116" y1="143" x2="116" y2="230" stroke="#00cc66" stroke-width="2"/>
  <line x1="316" y1="143" x2="316" y2="230" stroke="#00cc66" stroke-width="2"/>
  <line x1="116" y1="230" x2="650" y2="230" stroke="#00cc66" stroke-width="2"/>
  
  <!-- SPI connections -->
  <!-- CS connection -->
  <line x1="570" y1="419" x2="680" y2="419" stroke="#ff6600" stroke-width="2"/>
  <line x1="680" y1="419" x2="680" y2="143" stroke="#ff6600" stroke-width="2"/>
  <line x1="680" y1="143" x2="710" y2="143" stroke="#ff6600" stroke-width="2"/>
  
  <!-- MISO connection -->
  <line x1="570" y1="374" x2="660" y2="374" stroke="#ff6600" stroke-width="2"/>
  <line x1="660" y1="374" x2="660" y2="158" stroke="#ff6600" stroke-width="2"/>
  <line x1="660" y1="158" x2="710" y2="158" stroke="#ff6600" stroke-width="2"/>
  
  <!-- MOSI connection -->
  <line x1="570" y1="389" x2="670" y2="389" stroke="#ff6600" stroke-width="2"/>
  <line x1="670" y1="389" x2="670" y2="173" stroke="#ff6600" stroke-width="2"/>
  <line x1="670" y1="173" x2="710" y2="173" stroke="#ff6600" stroke-width="2"/>
  
  <!-- SCK connection -->
  <line x1="570" y1="404" x2="690" y2="404" stroke="#ff6600" stroke-width="2"/>
  <line x1="690" y1="404" x2="690" y2="188" stroke="#ff6600" stroke-width="2"/>
  <line x1="690" y1="188" x2="710" y2="188" stroke="#ff6600" stroke-width="2"/>
  
  <!-- INT connection -->
  <line x1="570" y1="454" x2="850" y2="454" stroke="#cc00cc" stroke-width="2"/>
  <line x1="850" y1="454" x2="850" y2="143" stroke="#cc00cc" stroke-width="2"/>
  <line x1="850" y1="143" x2="830" y2="143" stroke="#cc00cc" stroke-width="2"/>
  
  <!-- Connection table -->
  <g id="connection_table">
    <rect x="50" y="500" width="500" height="280" fill="white" stroke="#ccc" stroke-width="1" rx="3"/>
    <text x="300" y="520" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Connection Table</text>
    
    <!-- Headers -->
    <rect x="60" y="530" width="120" height="25" fill="#e9ecef" stroke="#ccc"/>
    <text x="120" y="547" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle">Module</text>
    
    <rect x="180" y="530" width="80" height="25" fill="#e9ecef" stroke="#ccc"/>
    <text x="220" y="547" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle">Pin</text>
    
    <rect x="260" y="530" width="120" height="25" fill="#e9ecef" stroke="#ccc"/>
    <text x="320" y="547" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle">Arduino Pin</text>
    
    <rect x="380" y="530" width="80" height="25" fill="#e9ecef" stroke="#ccc"/>
    <text x="420" y="547" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle">Function</text>
    
    <rect x="460" y="530" width="80" height="25" fill="#e9ecef" stroke="#ccc"/>
    <text x="500" y="547" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle">Color</text>
    
    <!-- Rows -->
    <g id="table_rows" font-family="Arial, sans-serif" font-size="10">
      <!-- INA219 -->
      <rect x="60" y="555" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="120" y="568" text-anchor="middle">INA219</text>
      <text x="220" y="568" text-anchor="middle">VCC</text>
      <text x="320" y="568" text-anchor="middle">5V</text>
      <text x="420" y="568" text-anchor="middle">Power</text>
      <text x="500" y="568" text-anchor="middle" fill="#ff0000">Red</text>
      
      <rect x="60" y="575" width="480" height="20" fill="#f8f9fa" stroke="#ccc"/>
      <text x="120" y="588" text-anchor="middle">INA219</text>
      <text x="220" y="588" text-anchor="middle">GND</text>
      <text x="320" y="588" text-anchor="middle">GND</text>
      <text x="420" y="588" text-anchor="middle">Ground</text>
      <text x="500" y="588" text-anchor="middle" fill="#000">Black</text>
      
      <rect x="60" y="595" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="120" y="608" text-anchor="middle">INA219</text>
      <text x="220" y="608" text-anchor="middle">SCL</text>
      <text x="320" y="608" text-anchor="middle">Pin 21 (SCL)</text>
      <text x="420" y="608" text-anchor="middle">I2C Clock</text>
      <text x="500" y="608" text-anchor="middle" fill="#00cc66">Green</text>
      
      <rect x="60" y="615" width="480" height="20" fill="#f8f9fa" stroke="#ccc"/>
      <text x="120" y="628" text-anchor="middle">INA219</text>
      <text x="220" y="628" text-anchor="middle">SDA</text>
      <text x="320" y="628" text-anchor="middle">Pin 20 (SDA)</text>
      <text x="420" y="628" text-anchor="middle">I2C Data</text>
      <text x="500" y="628" text-anchor="middle" fill="#00cc66">Green</text>
      
      <!-- MCP4725 -->
      <rect x="60" y="635" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="120" y="648" text-anchor="middle">MCP4725</text>
      <text x="220" y="648" text-anchor="middle">VCC</text>
      <text x="320" y="648" text-anchor="middle">5V</text>
      <text x="420" y="648" text-anchor="middle">Power</text>
      <text x="500" y="648" text-anchor="middle" fill="#ff0000">Red</text>
      
      <rect x="60" y="655" width="480" height="20" fill="#f8f9fa" stroke="#ccc"/>
      <text x="120" y="668" text-anchor="middle">MCP4725</text>
      <text x="220" y="668" text-anchor="middle">GND</text>
      <text x="320" y="668" text-anchor="middle">GND</text>
      <text x="420" y="668" text-anchor="middle">Ground</text>
      <text x="500" y="668" text-anchor="middle" fill="#000">Black</text>
      
      <rect x="60" y="675" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="120" y="688" text-anchor="middle">MCP4725</text>
      <text x="220" y="688" text-anchor="middle">SCL</text>
      <text x="320" y="688" text-anchor="middle">Pin 21 (SCL)</text>
      <text x="420" y="688" text-anchor="middle">I2C Clock</text>
      <text x="500" y="688" text-anchor="middle" fill="#00cc66">Green</text>
      
      <rect x="60" y="695" width="480" height="20" fill="#f8f9fa" stroke="#ccc"/>
      <text x="120" y="708" text-anchor="middle">MCP4725</text>
      <text x="220" y="708" text-anchor="middle">SDA</text>
      <text x="320" y="708" text-anchor="middle">Pin 20 (SDA)</text>
      <text x="420" y="708" text-anchor="middle">I2C Data</text>
      <text x="500" y="708" text-anchor="middle" fill="#00cc66">Green</text>
      
      <!-- MCP2515 -->
      <rect x="60" y="715" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="120" y="728" text-anchor="middle">MCP2515</text>
      <text x="220" y="728" text-anchor="middle">VCC</text>
      <text x="320" y="728" text-anchor="middle">5V</text>
      <text x="420" y="728" text-anchor="middle">Power</text>
      <text x="500" y="728" text-anchor="middle" fill="#ff0000">Red</text>
      
      <rect x="60" y="735" width="480" height="20" fill="#f8f9fa" stroke="#ccc"/>
      <text x="120" y="748" text-anchor="middle">MCP2515</text>
      <text x="220" y="748" text-anchor="middle">GND</text>
      <text x="320" y="748" text-anchor="middle">GND</text>
      <text x="420" y="748" text-anchor="middle">Ground</text>
      <text x="500" y="748" text-anchor="middle" fill="#000">Black</text>
      
      <rect x="60" y="755" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="120" y="768" text-anchor="middle">MCP2515</text>
      <text x="220" y="768" text-anchor="middle">CS</text>
      <text x="320" y="768" text-anchor="middle">Pin 53</text>
      <text x="420" y="768" text-anchor="middle">SPI CS</text>
      <text x="500" y="768" text-anchor="middle" fill="#ff6600">Orange</text>
    </g>
  </g>
  
  <!-- Additional connection table for MCP2515 -->
  <g id="connection_table2">
    <rect x="620" y="500" width="500" height="140" fill="white" stroke="#ccc" stroke-width="1" rx="3"/>
    
    <g font-family="Arial, sans-serif" font-size="10">
      <rect x="630" y="510" width="480" height="20" fill="#f8f9fa" stroke="#ccc"/>
      <text x="750" y="523" text-anchor="middle">MCP2515</text>
      <text x="790" y="523" text-anchor="middle">SO</text>
      <text x="870" y="523" text-anchor="middle">Pin 50 (MISO)</text>
      <text x="950" y="523" text-anchor="middle">SPI MISO</text>
      <text x="1050" y="523" text-anchor="middle" fill="#ff6600">Orange</text>
      
      <rect x="630" y="530" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="750" y="543" text-anchor="middle">MCP2515</text>
      <text x="790" y="543" text-anchor="middle">SI</text>
      <text x="870" y="543" text-anchor="middle">Pin 51 (MOSI)</text>
      <text x="950" y="543" text-anchor="middle">SPI MOSI</text>
      <text x="1050" y="543" text-anchor="middle" fill="#ff6600">Orange</text>
      
      <rect x="630" y="550" width="480" height="20" fill="#f8f9fa" stroke="#ccc"/>
      <text x="750" y="563" text-anchor="middle">MCP2515</text>
      <text x="790" y="563" text-anchor="middle">SCK</text>
      <text x="870" y="563" text-anchor="middle">Pin 52 (SCK)</text>
      <text x="950" y="563" text-anchor="middle">SPI Clock</text>
      <text x="1050" y="563" text-anchor="middle" fill="#ff6600">Orange</text>
      
      <rect x="630" y="570" width="480" height="20" fill="#fff8dc" stroke="#ccc"/>
      <text x="750" y="583" text-anchor="middle">MCP2515</text>
      <text x="790" y="583" text-anchor="middle">INT</text>
      <text x="870" y="583" text-anchor="middle">Pin 2</text>
      <text x="950" y="583" text-anchor="middle">Interrupt</text>
      <text x="1050" y="583" text-anchor="middle" fill="#cc00cc">Purple</text>
    </g>
  </g>
  
  <!-- Notes -->
  <text x="620" y="680" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Notes:</text>
  <text x="620" y="700" font-family="Arial, sans-serif" font-size="10" fill="#666">• INA219 and MCP4725 share I2C bus (SDA/SCL)</text>
  <text x="620" y="715" font-family="Arial, sans-serif" font-size="10" fill="#666">• MCP2515 uses SPI communication</text>
  <text x="620" y="730" font-family="Arial, sans-serif" font-size="10" fill="#666">• All modules share common 5V and GND</text>
  <text x="620" y="745" font-family="Arial, sans-serif" font-size="10" fill="#666">• Connect CAN_H and CAN_L to CAN bus network</text>
  <text x="620" y="760" font-family="Arial, sans-serif" font-size="10" fill="#666">• MCP4725 VOUT provides analog output (0-5V)</text>
</svg>
